<% layout('layout') -%>
<% script('js/feedbackview.js') -%>

<div id="feedback" class="container p-3 mt-3 mb-3 bg-light border rounded">
  
  <div id="mainContent">
    <img id="image" class="rounded mx-auto d-block img-fluid" src="./images/default_feedback.jpg" class="rounded" alt="Comentario">  
    <h1 id="title" class="display-2"></h1>
    <div>
      <div>
        <small id="date"></small>
        <p id="state"></p>
      </div>
    </div>
    <p id="text" class="font-weight-light lead"></p>
  </div>
  
  <form id="editFeedback" class="m-3" hidden>
    <div class="form-group row">
      <label for="title" class="col-sm-2 col-form-label">Nuevo título del comentario</label>
      <div class="col-sm-8">
        <input type="text" class="form-control" name="title">
      </div>
    </div>
    
    <div class="form-group row">
      <label for="text" class="col-sm-2 col-form-label">Texto del comentario</label>
      <div class="col-sm-8">
        <textarea type="text" class="form-control" name="text" rows="10"></textarea>
      </div>
    </div>
    
    <div class="form-group row">
      <div class="col-sm-4">
        <input class="btn btn-success" type="submit" name="submit" title="Gauardar cambios" value="Guardar cambios">
        <input id="cancel" class="btn btn-danger" name="cancel" title="Cancelar" value="Cancelar">
      </div>
    </div> 
  </form>
</div>

<div id="changueState" class="container border rounded">
  <h4 class="display-5 text-center pt-3">Estado del feedback</h4>
  <form id="formChangueState" class="p-3">
    <div class="row">
      <div class="col custom-control custom-radio">
        <input type="radio" id="unvisualized" name="state" class="custom-control-input" value="unvisualized">
        <label class="custom-control-label text-muted" for="unvisualized">Sin visualizar</label>
      </div>
      <div class="col custom-control custom-radio">
        <input type="radio" id="visualized" name="state" class="custom-control-input" value="visualized">
        <label class="custom-control-label text-info" for="visualized">Visto</label>
      </div>
      <div class="col custom-control custom-radio">
        <input type="radio" id="working" name="state" class="custom-control-input" value="working">
        <label class="custom-control-label text-primary" for="working">Trabajando en ello</label>
      </div>
      <div class="col custom-control custom-radio">
        <input type="radio" id="searching" name="state" class="custom-control-input" value="searching">
        <label class="custom-control-label text-primary" for="searching">Buscando solución</label>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col custom-control custom-radio">
        <input type="radio" id="incoming" name="state" class="custom-control-input" value="incoming">
        <label class="custom-control-label text-warning" for="incoming">Solución próximamente</label>
      </div>
      <div class="col custom-control custom-radio">
        <input type="radio" id="finished" name="state" class="custom-control-input" value="finished">
        <label class="custom-control-label text-success" for="finished">Arreglado</label>
      </div>
      <div class="col custom-control custom-radio">
        <input type="radio" id="implemented" name="state" class="custom-control-input" value="implemented">
        <label class="custom-control-label text-success" for="implemented">Implementado</label>
      </div>
      <div class="col custom-control custom-radio">
        <input type="radio" id="notnow" name="state" class="custom-control-input" value="notnow">
        <label class="custom-control-label text-danger" for="notnow">Sin interés</label>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col text-center">
        <button id="changue" type="submit" class="btn btn-success">Cambiar estado</button>
        <button id="cancel" type="button" class="btn btn-danger">Cancelar</button>
      </div>
    </div>
  </form>
</div>

<div id="notification" class="container"></div>

<div id="commentSection" class="container mt-3">
  <%if (client.id != null){ %>
    <button id="addcomment" type='button' class='btn btn-success m-3' title='Añadir comentario'>Añadir comentario <i class='fas fa-plus-circle'></i></button>
    <form id="formComment">
      <div class="form-group">
        <label for="comment">Comentario:</label>
        <textarea class="form-control" rows="5" id="comment" name="comment"></textarea>
      </div>
      <button type="submit" class="btn btn-primary">Publicar</button>
    </form>
    <% } %>
    <div id="comments" class="mb-3"></div>
</div>